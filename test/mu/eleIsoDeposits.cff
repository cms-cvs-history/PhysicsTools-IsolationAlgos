#pieces needed to run the associator-related stuff
include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cff"
include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"
include "Geometry/CommonDetUnit/data/globalTrackingGeometry.cfi"
include "TrackPropagation/SteppingHelixPropagator/data/SteppingHelixPropagatorAny.cfi"
include "TrackingTools/TrackAssociator/data/DetIdAssociatorESProducer.cff" 


#candIsoDeposit from tracks for gsf electrons; make distinct names for tracker and global muons
module eleIsoDepositTk 
       = candIsoDepositCtfTk from "PhysicsTools/IsolationAlgos/test/mu/candIsoDepositCtfTk.cfi"
replace eleIsoDepositTk.src = pixelMatchGsfElectrons
replace eleIsoDepositTk.trackType = "gsf"
#will read general tracks here
replace eleIsoDepositTk.ExtractorPSet = { using MIsoTrackExtractorBlock }


#candIsoDeposit maker for gsf electrons based on TrackAssociator using towers
module eleIsoDepositCalByAssociatorTowers 
       = candIsoDepositCalByAssociatorTowers from "PhysicsTools/IsolationAlgos/test/mu/candIsoDepositCalByAssociatorTowers.cfi"
replace eleIsoDepositCalByAssociatorTowers.src = pixelMatchGsfElectrons
replace eleIsoDepositCalByAssociatorTowers.trackType = "gsf"
#that's what's already used: can't replace anymore
#replace eleIsoDepositCalByAssociatorTowers.ExtractorPSet = { using MIsoCaloExtractorByAssociatorTowersBlock }

#candIsoDeposit maker for  and gsf electrons based on TrackAssociator using rec-hits
module eleIsoDepositCalByAssociatorHits 
       = candIsoDepositCalByAssociatorHits from "PhysicsTools/IsolationAlgos/test/mu/candIsoDepositCalByAssociatorHits.cfi"
replace eleIsoDepositCalByAssociatorHits.src = pixelMatchGsfElectrons
replace eleIsoDepositCalByAssociatorHits.trackType = "gsf"
#that's what's already used: can't replace anymore
#replace eleIsoDepositCalByAssociatorHits.ExtractorPSet = { using MIsoCaloExtractorByAssociatorHitsBlock }

#candIsoDeposit maker for gsf electrons based on TrackAssociator using towers
module eleIsoDepositJets 
       = candIsoDepositJets from "PhysicsTools/IsolationAlgos/test/mu/candIsoDepositJets.cfi"
replace eleIsoDepositJets.src = pixelMatchGsfElectrons
replace eleIsoDepositJets.trackType = "gsf"
#that's what's already used: can't replace anymore
#replace eleIsoDepositJets.ExtractorPSet  = { using MIsoJetExtractorBlock }

#Ecal-only candIsoDeposit using CaloExtractor for 
module eleIsoDepositCalEcal = candIsoDepositCal from "PhysicsTools/IsolationAlgos/test/mu/candIsoDepositCal.cfi"
replace eleIsoDepositCalEcal.src = pixelMatchGsfElectrons
replace eleIsoDepositCalEcal.trackType = "gsf"
replace eleIsoDepositCalEcal.ExtractorPSet = { using MIsoCaloExtractorEcalBlock }


#Hcal-only candIsoDeposit using CaloExtractor for 
module eleIsoDepositCalHcal = candIsoDepositCal from "PhysicsTools/IsolationAlgos/test/mu/candIsoDepositCal.cfi"
replace eleIsoDepositCalHcal.src = pixelMatchGsfElectrons
replace eleIsoDepositCalHcal.trackType = "gsf"
replace eleIsoDepositCalHcal.ExtractorPSet = { using MIsoCaloExtractorHcalBlock }


##########################################################################
# and now sequences of the above
##########################################################################
# "standard sequences"
sequence eleIsoDeposits = {
  eleIsoDepositTk & 
#these two below should be better replaced with proper
#extractors by egamma (assuming it's a muon track for now -- not the best choice)
  eleIsoDepositCalByAssociatorTowers & 
  eleIsoDepositJets
}
